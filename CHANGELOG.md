# 更新日誌

## 版本 0.4.0 (2025/12/17)

### 🎯 重大功能更新

#### 🔄 裝置重連系統
- **智能重連機制**：實作混合式重連（裝置 ID + 驗證 Token）
- **2小時有效期**：Token 在房間存在期間有效，過期時間 2 小時
- **自動識別裝置**：系統能自動識別你的裝置並重新連線
- **安全性提升**：使用 Token 驗證防止冒充

#### 🔒 遊戲完整性保護
- **遊戲開始後禁止加入**：防止中途加入導致抽獎結果錯誤
- **即時狀態檢查**：系統會自動檢查房間狀態，無法加入時會清楚提示原因
- **更準確的結果**：確保所有玩家都是從一開始就參與

#### 🆔 遊戲唯一識別碼
- **自動生成 ID**：每場遊戲都有唯一識別碼（格式：GAME-YYYYMMDD-RANDOM）
- **歷史記錄追蹤**：可以透過 Game ID 找到對應的遊戲記錄
- **便於分享**：分享結果時包含 Game ID，方便追蹤來源

#### 📱 社群媒體快速分享
- **全新分享面板**：精美的分享界面，一目了然
- **8 大平台支援**：
  - 📷 Instagram
  - 🧵 Threads
  - 👥 Facebook
  - 🐦 X (Twitter)
  - 💬 WhatsApp
  - ✈️ Telegram
  - 💚 LINE
  - 🔗 複製連結
- **一鍵分享**：點擊就能快速分享到各大社群平台
- **圖片下載**：桌面版可直接下載圖片手動上傳

### ⚡ 使用體驗優化

#### 更聰明的輸入框
- **自動聚焦**：打開建立房間彈窗時，名字輸入框自動聚焦
- **加入房間優化**：透過連結加入時，自動聚焦到名字輸入框
- **省時省力**：不用再手動點擊輸入框了

#### 連線穩定性改進
- **修復房間連結問題**：使用房間連結現在能正常進入了
- **事件監聽器優化**：避免重複註冊造成的問題
- **更好的錯誤提示**：清楚告訴你為什麼無法加入房間

### 🛠️ 技術改進
- 優化 WebSocket 事件監聽器生命週期管理
- 改進房間加入邏輯和錯誤處理

### 🐛 問題修復
- 修復加入房間時事件監聽器衝突導致無法進入
- 修復建立房間按鈕重複點擊問題
- 修復遊戲開始後加入導致結果錯誤
- 改進超時處理機制

---

## 版本 0.3.1 (2025/12/17)

### 🎯 優化改進

#### 📤 分享功能大升級
- **圖片分享更聰明**：會自動節錄你的結果附近的內容，高亮顯示你抽到了什麼
- **文字版更方便**：點擊文字版分享會直接複製到剪貼簿

#### ⚡ 使用體驗優化
- **防止手滑**：建立房間、加入房間按鈕加上防重複點擊保護
- **進階選項更簡單**：連線模式下，主持人開啟進階選項不再需要密碼（主持模式還是要密碼喔）

#### 🔧 技術改進
- 修正了一些小問題
- 優化了程式碼結構

---

## 版本 0.3.0 (2025/12/17)

### 🎉 重要更新

#### 🔌 主機掉線也不怕了！
還在擔心連線模式時主機突然斷線，遊戲就玩不下去嗎？這個版本解決了這個問題！

- **房間不會消失**：主機掉線時，房間會繼續保留，大家還是可以繼續玩
- **自動找新主機**：系統會自動把主機權限交給下一個人，遊戲繼續進行
- **貼心提醒**：有人掉線時會通知大家，讓所有人都知道現在誰是主機

這樣就算主機網路不穩定，也不用擔心要重新開房間了！👍

#### 📤 超方便的分享功能
完成抽獎後想炫耀結果嗎？現在有三種超棒的分享方式：

**📝 文字版分享**
- 快速複製結果文字

**🖼️ 圖片版分享**
- 可以直接分享到社群媒體

**💾 下載圖片**
- 把結果圖片存到手機或電腦
- 方便日後查看或分享

**快速分享到社群平台**
點一下就能分享到：
- Facebook 臉書
- X (Twitter) 推特
- Threads
- LINE
- Telegram
- WhatsApp
- 複製連結

無論是主持模式還是連線模式，都可以使用這些分享功能喔！

---

## 版本 0.2.0 (之前)

### 已有功能
- ✨ 抽獎完成後的慶祝動畫
- 👤 可以更改自己的名稱
- 📤 基本的分享結果功能
- 📝 查看歷史抽獎紀錄
- 🔐 社交帳號登入圖標
